# nano_4k_1602_lcd
Simple library to interface with Hitachi-compatible character LCDs, 
for Gowin FPGAs with integrated ARM Cortex M3 Microcontrollers such 
as the GW1NSR-4C and a specific focus on the Sipeed Tang Nano 4K board.
This repository contains an example Gowin MCU Designer project using the library to show off the LCD's features.
# How to use with the Sipeed Tang Nano 4K:
1. First, you'll need an FPGA design that sets the CPU in motion, you
   can use the design provided by Gowin that I slightly modified.
   **[FPGA Design](https://github.com/verilog-indeed/nano_4k_empu), I already included the .fs bitstream file you'll need.**
   
2. Download this repository, open the project in Gowin MCU Designer and run the debug build.
   The actual LCD library is contained in the LCD_LIBRARY folder.
   
3. Connect pins 30, 29, 28, 27 of the Nano 4K to the pins D4, D5, D6, D7 of the LCD respectively. 

   Connect pins 31, 32 of the Nano 4K to the RS pin and the E pin of the LCD respectively.
   
   Connect power to the LCD, a potentiometer to V0 for contrast setting, and tie the RW pin to ground.

4. Connect the board with the USB cable to your computer, open the Programmer **provided specifically by Sipeed** in "MCU Mode->Firmware Erase, Program" operation. 

   For the bitstream (first field) select the bitstream from the "gowin_empu" FPGA project     (nano_4k_empu/gowin_empu/impl/pnr/gowin_empu.fs).
   
   For the MCU firmware (second field) select the binary generated by the GMD project (nano_4k_1602_lcd/Debug/nano_4k_1602_lcd.bin)

5. Program the board, now you should see a counter on the LCD!
